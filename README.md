# V2Ray ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬

ğŸš€ ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ V2Ray å®‰è£…å’Œç®¡ç†è„šæœ¬ï¼Œæ”¯æŒ Debianã€Ubuntuã€CentOSã€OpenWrt ç­‰ä¸»æµ Linux å‘è¡Œç‰ˆã€‚

## âœ¨ ç‰¹æ€§

- ğŸ”§ **ä¸€é”®å®‰è£…**: æ”¯æŒä¸€é”®å®‰è£… V2Ray åˆ°æ ‡å‡†ç³»ç»Ÿç›®å½•
- ğŸŒ **åŒæ ˆæ”¯æŒ**: è‡ªåŠ¨è·å–å¹¶æ˜¾ç¤º IPv4 å’Œ IPv6 åœ°å€
- ğŸ® **äº¤äº’å¼èœå•**: å‹å¥½çš„äº¤äº’å¼ç®¡ç†ç•Œé¢
- ğŸ“± **å®¢æˆ·ç«¯é…ç½®**: è‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å’Œé“¾æ¥
- ğŸ”„ **æœåŠ¡ç®¡ç†**: å®Œæ•´çš„æœåŠ¡å¯åŠ¨ã€åœæ­¢ã€é‡å¯åŠŸèƒ½
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: å®æ—¶æŸ¥çœ‹æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—
- ğŸ›¡ï¸ **å®‰å…¨è®¾è®¡**: ä½¿ç”¨ nobody ç”¨æˆ·è¿è¡Œï¼Œæé«˜å®‰å…¨æ€§
- ğŸ“ **æ ‡å‡†ç›®å½•**: ä½¿ç”¨ç³»ç»Ÿæ ‡å‡†ç›®å½•ç»“æ„
- ğŸ”„ **è‡ªåŠ¨æ›´æ–°**: æ”¯æŒæ£€æŸ¥å’Œæ›´æ–° V2Ray å†…æ ¸

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Debian 9+, Ubuntu 18+, CentOS 7+, OpenWrt ç­‰
- **æ¶æ„æ”¯æŒ**: x86_64, aarch64, armv7l
- **æƒé™è¦æ±‚**: Root æƒé™
- **ç½‘ç»œè¦æ±‚**: éœ€è¦ç½‘ç»œè¿æ¥ä¸‹è½½ V2Ray

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®å®‰è£…

```bash
# ä¸‹è½½å¹¶è¿è¡Œä¸€é”®å®‰è£…è„šæœ¬
curl -L https://raw.githubusercontent.com/JarvanDing/myss/main/install_v2ray.sh | bash
```

### æ‰‹åŠ¨å®‰è£…

```bash
# 1. ä¸‹è½½ç®¡ç†è„šæœ¬
wget https://raw.githubusercontent.com/JarvanDing/myss/main/v2ray_manager.sh

# 2. è®¾ç½®æ‰§è¡Œæƒé™
chmod +x v2ray_manager.sh

# 3. å®‰è£… V2Ray
sudo ./v2ray_manager.sh install
```

## ğŸ“ ç›®å½•ç»“æ„

å®‰è£…åçš„æ ‡å‡†ç›®å½•ç»“æ„ï¼š

```
/usr/local/v2ray/           # V2Ray ä¸»å®‰è£…ç›®å½•
â”œâ”€â”€ v2ray-config.txt        # å®¢æˆ·ç«¯é…ç½®ä¿¡æ¯
â””â”€â”€ v2ray-urls.txt          # VMess é“¾æ¥

/etc/v2ray/                 # é…ç½®æ–‡ä»¶ç›®å½•
â””â”€â”€ config.json            # V2Ray é…ç½®æ–‡ä»¶

/var/log/v2ray/            # æ—¥å¿—ç›®å½•
â”œâ”€â”€ access.log             # è®¿é—®æ—¥å¿—
â””â”€â”€ error.log              # é”™è¯¯æ—¥å¿—

/usr/local/bin/            # äºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•
â”œâ”€â”€ v2ray                  # V2Ray å¯æ‰§è¡Œæ–‡ä»¶
â””â”€â”€ v2ray_manager.sh       # ç®¡ç†è„šæœ¬
```

## ğŸ® ä½¿ç”¨æ–¹æ³•

### äº¤äº’å¼èœå•

```bash
# å¯åŠ¨äº¤äº’å¼èœå•ï¼ˆæ¨èï¼‰
2ray

# æˆ–è€…ä½¿ç”¨å®Œæ•´å‘½ä»¤å
v2ray_manager.sh
```

### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# å®‰è£… V2Ray
2ray install

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
2ray status

# å¯åŠ¨æœåŠ¡
2ray start

# åœæ­¢æœåŠ¡
2ray stop

# é‡å¯æœåŠ¡
2ray restart

# æŸ¥çœ‹æ—¥å¿—
2ray logs

# æŸ¥çœ‹é…ç½®ä¿¡æ¯
2ray info

# æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®
2ray client-config

# æ£€æŸ¥æ›´æ–°çŠ¶æ€
2ray check-update

# æ›´æ–° V2Ray å†…æ ¸
2ray update

# å¸è½½ V2Ray
2ray uninstall

# æŸ¥çœ‹å¸®åŠ©
2ray help
```

### ğŸ’¡ å‘½ä»¤è¯´æ˜

å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»º `2ray` å‘½ä»¤åˆ«åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ï¼š
- `2ray` - å¿«é€Ÿè®¿é—®äº¤äº’å¼èœå•
- `2ray [å‘½ä»¤]` - å¿«é€Ÿæ‰§è¡Œç®¡ç†å‘½ä»¤
- `v2ray_manager.sh` - å®Œæ•´å‘½ä»¤åï¼ˆåŠŸèƒ½ç›¸åŒï¼‰

## ğŸ”§ é…ç½®è¯´æ˜

### é»˜è®¤é…ç½®

- **ç«¯å£**: 8080
- **åè®®**: VMess + WebSocket
- **è·¯å¾„**: éšæœºç”Ÿæˆ5ä½å­—ç¬¦ (å¦‚: `/a1b2c`)
- **ç”¨æˆ·**: nobody
- **æ—¥å¿—çº§åˆ«**: warning

### ç½‘ç»œé…ç½®

- **æœ¬åœ°ç›‘å¬**: V2Ray é»˜è®¤ç›‘å¬æœ¬åœ° 127.0.0.1:8080
- **é˜²ç«å¢™**: è„šæœ¬ä¸ä¼šè‡ªåŠ¨æ·»åŠ é˜²ç«å¢™è§„åˆ™ï¼Œé€‚åˆé…åˆ nginx åä»£ä½¿ç”¨
- **å¤–éƒ¨è®¿é—®**: å»ºè®®é€šè¿‡ nginx åå‘ä»£ç†å¯¹å¤–æä¾›æœåŠ¡

### å®¢æˆ·ç«¯é…ç½®

å®‰è£…å®Œæˆåï¼Œå®¢æˆ·ç«¯é…ç½®ä¿¡æ¯ä¿å­˜åœ¨ï¼š
- `/usr/local/v2ray/v2ray-config.txt` - è¯¦ç»†é…ç½®ä¿¡æ¯
- `/usr/local/v2ray/v2ray-urls.txt` - VMess é“¾æ¥
- `/usr/local/v2ray/client-configs.txt` - å®¢æˆ·ç«¯é…ç½®ï¼ˆåŒ…å«åŸå§‹å’Œåä»£é…ç½®ï¼‰

#### æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®

```bash
# æŸ¥çœ‹å®¢æˆ·ç«¯é…ç½®ï¼ˆåŒ…å«åŸå§‹å’Œåä»£é…ç½®ï¼‰
2ray client-config
```

æ­¤åŠŸèƒ½ä¼šæ˜¾ç¤ºï¼š
- **åŸŸååä»£é…ç½®**ï¼šä½¿ç”¨åŸŸåå’Œ443ç«¯å£ï¼Œæ¨èä½¿ç”¨
- **IPv4 åŸå§‹é…ç½®**ï¼šç›´æ¥è¿æ¥æœåŠ¡å™¨IPï¼Œç«¯å£8080
- **IPv6 åŸå§‹é…ç½®**ï¼šç›´æ¥è¿æ¥æœåŠ¡å™¨IPv6ï¼Œç«¯å£8080

## ğŸŒ IP åœ°å€è·å–

è„šæœ¬ä¼šè‡ªåŠ¨è·å–æœåŠ¡å™¨çš„ IPv4 å’Œ IPv6 åœ°å€ï¼š

- **IPv4 ä¼˜å…ˆ**: ä½¿ç”¨ `curl -4` å¼ºåˆ¶è·å– IPv4 åœ°å€
- **IPv6 å¤‡é€‰**: å¦‚æœ IPv4 è·å–å¤±è´¥ï¼Œä¼šå°è¯•è·å– IPv6 åœ°å€
- **å¤šæœåŠ¡æ”¯æŒ**: æ”¯æŒ ifconfig.meã€ipinfo.ioã€icanhazip.com ç­‰å¤šä¸ªæœåŠ¡
- **æœ¬åœ°å¤‡é€‰**: æœ€åä½¿ç”¨æœ¬åœ°ç½‘ç»œæ¥å£ä½œä¸ºå¤‡é€‰

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **æƒé™éš”ç¦»**: ä½¿ç”¨ nobody:nogroup ç”¨æˆ·è¿è¡Œ
- **ç›®å½•æƒé™**: åˆç†çš„æ–‡ä»¶æƒé™è®¾ç½®
- **æœåŠ¡éš”ç¦»**: ç‹¬ç«‹çš„ systemd æœåŠ¡
- **æ—¥å¿—è®°å½•**: å®Œæ•´çš„è®¿é—®å’Œé”™è¯¯æ—¥å¿—

## ğŸ“Š æœåŠ¡ç®¡ç†

### systemd æœåŠ¡

- **æœåŠ¡åç§°**: v2ray
- **è‡ªåŠ¨å¯åŠ¨**: æ”¯æŒå¼€æœºè‡ªå¯
- **æ•…éšœé‡å¯**: è‡ªåŠ¨é‡å¯å¤±è´¥çš„æœåŠ¡
- **æ—¥å¿—ç®¡ç†**: é›†æˆ systemd æ—¥å¿—

### å¸¸ç”¨å‘½ä»¤

```bash
# å¯ç”¨å¼€æœºè‡ªå¯
v2ray_manager.sh enable

# ç¦ç”¨å¼€æœºè‡ªå¯
v2ray_manager.sh disable

# é‡æ–°åŠ è½½é…ç½®
v2ray_manager.sh reload

# æ£€æŸ¥å®‰è£…çŠ¶æ€
v2ray_manager.sh check
```

## ğŸ”„ æ›´æ–°åŠŸèƒ½

### æ£€æŸ¥æ›´æ–°

```bash
# æ£€æŸ¥ V2Ray æ›´æ–°çŠ¶æ€
v2ray_manager.sh check-update
```

### æ›´æ–°å†…æ ¸

```bash
# æ›´æ–° V2Ray å†…æ ¸åˆ°æœ€æ–°ç‰ˆæœ¬
v2ray_manager.sh update
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é”™è¯¯**
   ```bash
   sudo v2ray_manager.sh install
   ```

2. **ç½‘ç»œè¿æ¥é—®é¢˜**
   ```bash
   # æ£€æŸ¥ç½‘ç»œè¿æ¥
   ping 8.8.8.8
   
   # æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
   netstat -tlnp | grep 8080
   ```

3. **æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
   systemctl status v2ray
   
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   journalctl -u v2ray -f
   ```

### æ—¥å¿—ä½ç½®

- **æœåŠ¡æ—¥å¿—**: `journalctl -u v2ray`
- **è®¿é—®æ—¥å¿—**: `/var/log/v2ray/access.log`
- **é”™è¯¯æ—¥å¿—**: `/var/log/v2ray/error.log`

## ğŸ”„ æ›´æ–°å’Œå¸è½½

### æ›´æ–° V2Ray

```bash
# æ£€æŸ¥æ›´æ–°çŠ¶æ€
v2ray_manager.sh check-update

# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
v2ray_manager.sh update
```

### å®Œå…¨å¸è½½

```bash
# å¸è½½ V2Ray å’Œæ‰€æœ‰ç›¸å…³æ–‡ä»¶
v2ray_manager.sh uninstall
```

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Issues](https://github.com/JarvanDing/myss/issues) é¡µé¢
2. æäº¤æ–°çš„ Issue
3. è”ç³»ç»´æŠ¤è€…

---

**æ³¨æ„**: è¯·ç¡®ä¿åœ¨æ‚¨çš„å›½å®¶/åœ°åŒºä½¿ç”¨ V2Ray æ˜¯åˆæ³•çš„ã€‚
